window.addEventListener("load",(function(){var t,n="inline-block",e=null,o=25e5,a=2e7,l=3e6,s=document.getElementsByClassName("bk-btn"),r='<div class="bk-btn-box">',p=document.getElementById("bk-modal"),m="",d="https://pc.baokim.vn/",c="https://pg.baokim.vn/",g="https://ws.baokim.vn/payment-services",u=window.location.hostname;"m."==(u=u.replace("www.","")).substring(0,2)&&(u=u.substring(2));var b=window.location.protocol;function v(){var n=document.getElementsByClassName("bk-product-name"),o=document.getElementsByClassName("bk-product-price"),a=document.getElementsByClassName("bk-product-qty"),l=document.getElementsByClassName("bk-product-image"),s=document.getElementsByClassName("bk-product-property"),r=[],p=[],m=[],d=[],c="";for(maxLoop=n.length,i=0;i<maxLoop;i++){r.push(n[i].innerHTML);var v=U(o[i].innerHTML);v=o[i].firstElementChild&&o[i].firstElementChild.innerHTML.match(/\d+/g)?U(o[i].firstElementChild.innerHTML):U(o[i].innerHTML),p.push(v);var y=null;l[i]&&(l[i].hasAttribute("data-src")?y=l[i].getAttribute("data-src"):l[i].hasAttribute("src")?y=l[i].getAttribute("src"):l[i].hasAttribute("data-o_src")&&(y=l[i].getAttribute("data-o_src")),y&&!1===y.includes("//")&&(y=b+"//"+u+"/"+y)),d.push(y),void 0!==a[i]&&a[i].value?m.push(a[i].value):m.push(1)}var h="undefined"!=typeof variant_id_pro?variant_id_pro:null;if(!h){var f=document.querySelectorAll('.js-variant-option-container > input[type="hidden"]');if(f.length>0){var k=(f=document.querySelectorAll('.js-variant-option-container > input[type="hidden"]')[0]).value;if(k)h=JSON.parse(k).variant_id,console.log(h)}var _=document.getElementById("product-selectors");_&&(h=_.value);var x=document.getElementById("product-select");x&&(h=x.value);var w=document.querySelectorAll("[name=variantId]");w.length>0&&(h=w[0].value);var E=document.getElementById("productSelect");E&&(h=E.value)}var N=null,L="undefined"!=typeof pro_id?pro_id:null;L&&(N=parseInt(L));var C=s.length;if(C>0)for(i=0;i<C;i++){var T=s[i];h||(h=T.value,isNaN(h)&&(h=null)),"input"==T.tagName.toLowerCase()?c+=T.value+" - ":"select"==T.tagName.toLowerCase()?c+=T.options[T.selectedIndex].text+" - ":c+=T.innerHTML+" "}var H=[];for(i=0;i<maxLoop;i++){"undefined"!=typeof meta&&void 0!==meta.product&&(N=meta.product.id);var B={name:r[i],image:d[i],quantity:m[i],price:p[i],platform_product_id:N,platform_variant_id:h};H.push(B)}var I={products:H,domain:u,merchantLogo:t.logo,productProperty:c};console.log(I);var A=G("POST",g+"api/v1/order-temporary/store",JSON.stringify(I));A&&(e=A.token)}console.log(u),function(){var e=G("GET",d+"api/plus/get-merchant?domain="+u,null);if(!e)return;if(200!=e.code)return;var i=e.meta;if(!i)return;if(null==(t=i.data))return y.style.display="none",h.style.display="none",f.style.display="none",k.style.display="none",_.style.display="none",void(w.style.display="none");var c=t.config,g=c.payment,b=c.installment,v=c.installment_amigo;p&&(m+='<div id="bk-modal-payment" class="bk-modal">',m+='<div class="bk-modal-content" id="bk-modal-content-style">',m+='<div id="bk-modal-pop" class="bk-modal-header">',m+='<div class="bk-container-fluid" style="box-sizing: border-box">',m+='<div class="bk-row bk-popup-header">',m+='<div class="bk-col-5 bk-col-lg-3" style="box-sizing: border-box" id="bk-logo">',m+="</div>",m+='<div class="bk-col-3 bk-col-lg-6" style="box-sizing: border-box">',m+="</div>",m+='<div class="bk-col-4 bk-col-lg-3 bk-text-right" style="box-sizing: border-box">',m+='<button type="button" id="bk-modal-close">&times;</button>',m+="</div>",m+="</div>",m+="</div>",m+="</div>",m+='<div class="bk-modal-body">',m+='<iframe width="100%" height="100%" id="iframe" src=""></iframe>',m+="</div>",m+="</div>",m+="</div>",m+='<div id="bk-modal-notify" class="bk-modal">',m+='<div class="bk-modal-content" id="bk-modal-content-notify">',m+='<div class="bk-modal-header">',m+='<div class="bk-container-fluid">',m+='<div class="bk-row bk-popup-header">',m+='<div class="bk-col-3" id="bk-logo">',m+="</div>",m+='<div class="bk-col-6">',m+="</div>",m+='<div class="bk-col-3 bk-text-right">',m+='<button type="button" id="bk-modal-close">&times;</button>',m+="</div>",m+="</div>",m+="</div>",m+="</div>",m+='<div class="bk-modal-body">',m+='<p class="text-center">Sản phẩm đã hết hàng, không thể thanh toán</p>',m+='<button type="button" class="bk-modal-notify-close bk-btn-notify-close">Đóng</button>',m+="</div>",m+="</div>",m+="</div>",p.innerHTML=m);if(g.enable){var E=document.getElementsByClassName("bk-product-price"),N=!0,L=E.length;for(I=0;I<L;I++){var C=E[I].innerHTML;if("LIÊN HỆ"===C.toUpperCase()||"ĐẶT HÀNG"===C.toUpperCase())return void(N=!1);if(void 0===(C=E[I].firstElementChild&&E[I].firstElementChild.innerHTML.match(/\d+/g)?U(E[I].firstElementChild.innerHTML):U(E[I].innerHTML)))return void(N=!1)}if(N){let e="Mua ngay";var T="Giao tận nơi hoặc nhận tại cửa hàng",H="#e00",B="#fff";if(null!=t.style_popup){const n=t.style_popup;for(var I=0;I<n.length;I++)1==n[I].type&&1==n[I].status&&(null!=n[I].txt_btn_integrated&&(e=n[I].txt_btn_integrated),null!=n[I].note_btn_integrated&&(T=n[I].note_btn_integrated),null!=n[I].bg_color_btn_payment&&(H=n[I].bg_color_btn_payment),null!=n[I].tx_color_btn_payment&&(B=n[I].tx_color_btn_payment))}r+='<button class="bk-btn-paynow" style="display: '+n+";background-color: "+H+" !important;color: "+B+' !important" type="button">',r+="<strong>"+e+"</strong>",r+="<span>"+T+"</span>",r+="</button>"}}if(b.enable){var A=z(),M=!1;"donghoduyanh.com"==u&&(l=5e6),A>=l&&(M=!0),"demo-bkplus.baokim.vn"!=u&&"devtest.baokim.vn:9405"!=u&&"devtest.baokim.vn"!=u&&"bkplus.myharavan.com"!=u||(M=!0),console.log("Total: "+A+" - instalment value: "+l);let e="Trả góp qua thẻ";var O="Visa, Master, JCB",q="#288ad6",P="#fff";if(null!=t.style_popup){const n=t.style_popup;for(I=0;I<n.length;I++)2==n[I].type&&1==n[I].status&&(null!=n[I].txt_btn_integrated&&(e=n[I].txt_btn_integrated),null!=n[I].note_btn_integrated&&(O=n[I].note_btn_integrated),null!=n[I].bg_color_btn_installment&&(q=n[I].bg_color_btn_installment),null!=n[I].tx_color_btn_installment&&(P=n[I].tx_color_btn_installment))}M&&(r+='<button class="bk-btn-installment" style="display: '+n+";background-color: "+q+" !important;color: "+P+' !important" type="button">',r+="<strong>"+e+"</strong>",r+="<span>"+O+"</span>",r+="</button>")}if(v.enable){A=z();var S=!1;v.hasOwnProperty("min_order_amount")&&(o=v.min_order_amount),v.hasOwnProperty("max_order_amount")&&(a=v.max_order_amount),A>=o&&A<=a&&(S=!0),"demo-bkplus.baokim.vn"!=u&&"devtest.baokim.vn:9405"!=u&&"devtest.baokim.vn"!=u&&"bkplus.myharavan.com"!=u||(S=!0),console.log(A);let t="Mua ngay - trả sau",n=e.meta.data.user.amigo,i=e.meta.data.user.kredivo,l=e.meta.data.user.hcvn,s=e.meta.data.user.atome,p="#f1eb1f",m="#235d97";if(null!=e.meta.data.style_popup){const n=e.meta.data.style_popup;for(let e=0;e<n.length;e++)3==n[e].type&&1==n[e].status&&(null!=n[e].txt_btn_integrated&&(t=n[e].txt_btn_integrated),null!=n[e].bg_color_btn_insta&&(p=n[e].bg_color_btn_insta),null!=n[e].tx_color_btn_insta&&(m=n[e].tx_color_btn_insta))}if(S){var j='<div class="bk-insta-content">';j+="homebest.vn"==u?'<strong style="color: #ffffff !important">TRẢ GÓP QUA CMT</strong>':"<strong>"+t+"</strong>","donghoduyanh.com"==u?j+='<span style="color: '+m+' !important">Không cần thẻ - Xét duyệt qua CCCD trong 20 giây</span>':"taozinsaigon.com"==u?j+='<span style="color: '+m+' !important">Phê duyệt trong 20 giây</span>':"homebest.vn"==u?j+='<span style="color: #ffffff !important">Duyệt nhanh qua điện thoại</span>':(j+="<span>",1==i&&(j+='<img src="https://pc.baokim.vn/platform/img/icon-kredivo.svg" alt="">'),1==s&&(j+='<img src="https://pc.baokim.vn/platform/img/icon-atome.svg" alt="" style="margin-left: 5px;">'),1==l&&(j+='<img src="https://pc.baokim.vn/platform/img/home-paylater-ngang-small.svg" alt="" style="margin-left: 5px; height: 20px !important;">'),1==n&&(j+='<img src="https://pc.baokim.vn/platform/img/icon-insta.svg" alt="" style="margin-left: 5px;">'),j+="</span>"),r+="homebest.vn"==u?'<button class="bk-btn-installment-amigo" style="display: flex;background-color: #0a0 !important; color: #ffffff !important;" type="button">':'<button class="bk-btn-installment-amigo" style="display: flex;background-color: '+p+" !important;color: "+m+' !important" type="button">',r+=j+="</div>",r+="</button>"}}r+="</div>";let J=e.meta.data.user.kredivo,K=e.meta.data.user.hcvn;1==e.meta.data.config.installment_amigo.promotion_kredivo&&1==e.meta.data.config.installment_amigo.promotion_hcvn?(r+='<div class="bk-promotion">',r+='    <div class="bk-promotion-title">',r+="        <p>ƯU ĐÃI KHI THANH TOÁN</p>",r+='        <img src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+='        <img src="https://pc.baokim.vn/platform/img/home-paylater-ngang-small.svg" style="height: 20px !important;" alt="">',r+="    </div>",r+='    <div class="bk-promotion-content">',r+="        <ul>",1==J&&(r+="            <li>",r+='                <img style="margin-top: 6px;" src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+="                <p>Giảm ngay 5% tối đa 500.000đ khi thanh toán trả góp 6/12 tháng</p>",r+='                <span><img style="margin-right: 4px;" src="https://pc.baokim.vn/platform/img/fire-promotion.svg" alt="">ƯU ĐÃI HOT</span>',r+="            </li>"),1==K&&(r+="            <li>",r+='                <img style="margin-top: 6px; width: 35px !important;" src="https://pc.baokim.vn/platform/img/home-paylater-vuong-small.svg" alt="">',r+="                <p>Giảm 5% tối đa 500k áp dụng cho đơn hàng thanh toán thành công đầu tiên</p>",r+='                 <span><img style="margin-right: 4px;" src="https://pc.baokim.vn/platform/img/fire-promotion.svg" alt="">ƯU ĐÃI HOT</span>',r+="            </li>",r+="            <li>",r+='                <img style="margin-top: 6px; width: 35px !important;" src="https://pc.baokim.vn/platform/img/home-paylater-vuong-small.svg" alt="">',r+="                <p>Giảm 50% tối đa 100k áp dụng cho đơn hàng thanh toán thành công đầu tiên</p>",r+='                <span style="background: none !important;"></span>',r+="            </li>"),1==J&&(r+="            <li>",r+='                <img style="margin-top: 6px;" src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+="                <p>Giảm 50% tối đa 100.000đ khi thanh toán lần đầu</p>",r+='                <span style="background: none !important;"></span>',r+="            </li>"),r+="        </ul>",r+='        <div class="bk-promotion-footer">',r+="            <p>Powered by</p>",r+='            <img src="https://pc.baokim.vn/platform/img/bk-logo-promotion.svg" alt="">',r+="        </div>",r+="    </div>",r+="</div>"):1==e.meta.data.config.installment_amigo.promotion_kredivo?(r+='<div class="bk-promotion">',r+='    <div class="bk-promotion-title">',r+="        <p>ƯU ĐÃI KHI THANH TOÁN</p>",r+='        <img src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+="    </div>",r+='    <div class="bk-promotion-content">',r+="        <ul>",1==J&&(r+="            <li>",r+='                <img style="margin-top: 6px;" src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+="                <p>Giảm ngay 5% tối đa 500.000đ khi thanh toán trả góp 6/12 tháng</p>",r+='                <span><img style="margin-right: 4px;" src="https://pc.baokim.vn/platform/img/fire-promotion.svg" alt="">ƯU ĐÃI HOT</span>',r+="            </li>",r+="            <li>",r+='                <img style="margin-top: 6px;" src="https://pc.baokim.vn/platform/img/kredivo.png" alt="">',r+="                <p>Giảm 50% tối đa 100.000đ khi thanh toán lần đầu</p>",r+='                <span style="background: none !important;"></span>',r+="            </li>"),r+="        </ul>",r+='        <div class="bk-promotion-footer">',r+="            <p>Powered by</p>",r+='            <img src="https://pc.baokim.vn/platform/img/bk-logo-promotion.svg" alt="">',r+="        </div>",r+="    </div>",r+="</div>"):1==e.meta.data.config.installment_amigo.promotion_hcvn&&(r+='<div class="bk-promotion">',r+='    <div class="bk-promotion-title">',r+="        <p>ƯU ĐÃI KHI THANH TOÁN</p>",r+='        <img style="height: 20px !important;" src="https://pc.baokim.vn/platform/img/home-paylater-ngang-small.svg" alt="">',r+="    </div>",r+='    <div class="bk-promotion-content">',r+="        <ul>",1==K&&(r+="            <li>",r+='                <img style="margin-top: 6px; width: 35px !important;" src="https://pc.baokim.vn/platform/img/home-paylater-vuong-small.svg" alt="">',r+="                <p>Giảm 5% tối đa 500k áp dụng cho đơn hàng thanh toán thành công đầu tiên</p>",r+='                 <span><img style="margin-right: 4px;" src="https://pc.baokim.vn/platform/img/fire-promotion.svg" alt="">ƯU ĐÃI HOT</span>',r+="            </li>",r+="            <li>",r+='                <img style="margin-top: 6px; width: 35px !important;" src="https://pc.baokim.vn/platform/img/home-paylater-vuong-small.svg" alt="">',r+="                <p>Giảm 50% tối đa 100k áp dụng cho đơn hàng thanh toán thành công đầu tiên </p>",r+='                <span style="background: none !important;"></span>',r+="            </li>"),r+="        </ul>",r+='        <div class="bk-promotion-footer">',r+="            <p>Powered by</p>",r+='            <img src="https://pc.baokim.vn/platform/img/bk-logo-promotion.svg" alt="">',r+="        </div>",r+="    </div>",r+="</div>");for(x in s)s[x].innerHTML=r}();var y=document.getElementById("bk-btn-paynow"),h=document.getElementsByClassName("bk-btn-paynow"),f=document.getElementById("bk-btn-installment"),k=document.getElementsByClassName("bk-btn-installment"),_=document.getElementById("bk-btn-installment-amigo"),w=document.getElementsByClassName("bk-btn-installment-amigo"),E=document.getElementsByClassName("bk-btn-paynow-list"),N=document.getElementsByClassName("bk-btn-installment-list"),L=document.getElementById("bk-modal-payment"),C=document.getElementById("bk-modal-notify"),T=document.getElementById("bk-modal-close"),H=document.getElementsByClassName("bk-modal-notify-close"),B=document.getElementById("iframe"),I=document.getElementById("bk-modal-pop"),A=document.getElementById("bk-modal-content-style");if(h.length>0)for(x=0;x<h.length;x++)h[x].addEventListener("click",(function(){M(this)}));if(k.length>0)for(x=0;x<k.length;x++)k[x].addEventListener("click",(function(){M(this,"/installment")}));if(w.length>0)for(x=0;x<w.length;x++)w[x].addEventListener("click",(function(){M(this,"/bnpl/installment")}));function M(n,o=""){var i=G("GET",d+"api/plus/get-merchant?domain="+u,null);if("bk-btn-paynow"==n.className){var a="#006d9c";if(null!=t.style_popup){const n=t.style_popup;for(var l=0;l<n.length;l++)1==n[l].type&&1==n[l].status&&(null!=n[l].bg_color_mdl_payment&&(a=n[l].bg_color_mdl_payment,I.style.backgroundColor=a),2==n[l].display_mode_popup&&(A.style.width="100%",A.style.margin="0px",A.style.height="100%"))}}if("bk-btn-installment"==n.className){var s="#006d9c";if(null!=t.style_popup){const n=t.style_popup;for(l=0;l<n.length;l++)2==n[l].type&&1==n[l].status&&(null!=n[l].bg_color_mdl_installment&&(s=n[l].bg_color_mdl_installment,I.style.backgroundColor=s),2==n[l].display_mode_popup&&(A.style.width="100%",A.style.margin="0px",A.style.height="100%"))}}if("bk-btn-installment-amigo"==n.className){var r="#006d9c";if(null!=t.style_popup){const n=t.style_popup;for(l=0;l<n.length;l++)3==n[l].type&&1==n[l].status&&(null!=n[l].bg_color_mdl_insta&&(r=n[l].bg_color_mdl_insta,I.style.backgroundColor=r),2==n[l].display_mode_popup&&(A.style.width="100%",A.style.margin="0px",A.style.height="100%"))}}var p,m,c=document.getElementsByClassName("bk-check-out-of-stock"),g=!1;if(c.length>0)for(l=0;l<c.length;l++){if("Hết hàng"===c[l].value)return g=!0,null;if("Liên hệ"===c[l].value)return g=!0,null}if(g)C.css({display:"block"}),C.removeClass("hide");else{var b=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS");e||v();var y=P(o);if(0==b)if("bk-btn-paynow"==n.className&&2==i.meta.data.display_version_paynow)try{window.open(y,"_blank")}catch(t){window.location.href=y}else if("bk-btn-installment"==n.className&&2==i.meta.data.display_version_installment)try{window.open(y,"_blank")}catch(t){window.location.href=y}else if("bk-btn-installment-amigo"==n.className&&2==i.meta.data.display_version_insta_installment)try{window.open(y,"_blank")}catch(t){window.location.href=y}else B.setAttribute("src",y),L.style.display="block",L.classList.remove("hide"),p=document.getElementsByTagName("body")[0],m=p.offsetWidth,p.style.overflow="hidden",p.style.width=m;else window.location=y}}if(document.addEventListener("keydown",(t=>{"Escape"===t.key&&(L.style.display="none",S())})),T&&T.addEventListener("click",(function(){L.style.display="none",S()})),H.length>0)for(j=0;j<H.length;j++)H[j].addEventListener("click",(function(){C.style.display="none",S()}));if(E.length>0)for(i=0;i<E.length;i++)E[i].addEventListener("click",(function(){O(this)}));if(N.length>0)for(i=0;i<N.length;i++)N[i].addEventListener("click",(function(){O(this,"/installment")}));function O(t,n=""){var e={},o=[],i=[],a=[];i.push(t.getAttribute("data-price")),a.push(t.getAttribute("data-image")),o.push(t.getAttribute("data-name")),e.productPrices=i,e.productNames=o,e.productImages=a,console.log(e),q(e);var l=P(n);B.setAttribute("src",l)}var q=function(n){L.style.display="block",L.classList.remove("hide");var o=["1"];maxLoopList=n.productNames.length;var a=[];for(i=0;i<maxLoopList;i++){var l={name:n.productNames[i],image:n.productImages[i],quantity:o[i],price:n.productPrices[i]};a.push(l)}var s={products:a,domain:u,merchantLogo:t.logo,productProperty:""},r=G("POST",g+"api/v1/order-temporary/store",JSON.stringify(s));r&&(e=r.token)};function G(t,n,e,o=!1){var i=new XMLHttpRequest;i.open(t,n,o);var a=null;try{i.setRequestHeader("Content-Type","application/json"),i.send(e),a=i.response,a=JSON.parse(a),console.log(a)}catch(t){console.log("Request failed"),console.log(t)}return a}function P(t=""){return c+t+"?token="+e}function S(){var t=document.getElementsByTagName("body")[0];t.style.overflow="auto",t.style.width="auto"}function U(t){return price=t.replace("VNĐ",""),price=t.replace("VND",""),price=t.replace(/[\[\]&]+/g,""),price=t.split(".").join(""),price=price.split(",").join(""),price=price.split(" ").join(""),price=t.replace(/[^0-9]/g,""),price=parseInt(price,10),price}function z(){var t=0,n=document.getElementsByClassName("bk-product-price"),e=document.getElementsByClassName("bk-product-qty"),o=n.length;for(console.log("length: "+o),i=0;i<o;i++){U(n[i].innerHTML);var a=1;e[i]&&(a=e[i].value),t+=(n[i].firstElementChild&&n[i].firstElementChild.innerHTML.match(/\d+/g)?U(n[i].firstElementChild.innerHTML):U(n[i].innerHTML))*a}return t}"undefined"!=typeof meta&&console.log(meta)}));
